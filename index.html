import React, { useEffect, useState } from "react";
import { motion } from "framer-motion";
import Typewriter from "typewriter-effect";

// Simple IconBadge component using emoji for reliability
const IconBadge = ({ icon, color }: { icon: string; color: string }) => (
  <div className={`text-3xl ${color}`}>{icon}</div>
);

const navItems = [
  "Home",
  "About",
  "Skills",
  "Projects",
  "Experience",
  "Certifications",
  "Achievements",
  "Contact",
];

const skills = [
  { name: "AWS", icon: <IconBadge icon="☁️" color="" /> },
  { name: "Kubernetes", icon: <IconBadge icon="📦" color="" /> },
  { name: "Terraform", icon: <IconBadge icon="🛠️" color="" /> },
  { name: "Docker", icon: <IconBadge icon="🐳" color="" /> },
  { name: "OpenShift", icon: <IconBadge icon="🎩" color="" /> },
  { name: "ArgoCD", icon: <IconBadge icon="🚀" color="" /> },
  { name: "CI/CD", icon: <IconBadge icon="⚡" color="" /> },
  { name: "Prisma Cloud", icon: <IconBadge icon="🔒" color="" /> },
  { name: "Linux", icon: <IconBadge icon="🐧" color="" /> },
  { name: "Python", icon: <IconBadge icon="🐍" color="" /> },
  { name: "GitHub", icon: <IconBadge icon="💻" color="" /> },
];

// Animation variants
const fadeInUp = {
  hidden: { opacity: 0, y: 40 },
  visible: { opacity: 1, y: 0, transition: { duration: 0.6 } },
};

export default function PortfolioPage() {
  const [active, setActive] = useState("Home");

  useEffect(() => {
    const handler = () => {
      const scrollPos = window.scrollY + window.innerHeight / 3;
      let current = "Home";
      navItems.forEach((id) => {
        const el = document.getElementById(id.toLowerCase());
        if (el && el.offsetTop <= scrollPos) current = id;
      });
      setActive(current);
    };
    window.addEventListener("scroll", handler);
    return () => window.removeEventListener("scroll", handler);
  }, []);

  return (
    <div className="bg-gradient-to-br from-gray-950 via-gray-900 to-black text-gray-100 font-sans scroll-smooth min-h-screen">
      {/* Navbar */}
      <nav className="fixed w-full bg-gray-800 bg-opacity-70 backdrop-blur-md z-50 shadow-lg">
        <div className="max-w-6xl mx-auto flex justify-between py-4 px-6">
          <h1 className="text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600">
            Shivani Kumari
          </h1>
          <div className="space-x-4">
            {navItems.map((id) => (
              <a
                key={id}
                href={`#${id.toLowerCase()}`}
                className={`capitalize hover:text-blue-400 transition ${
                  active === id ? "text-blue-500 underline" : "text-gray-300"
                }`}
              >
                {id}
              </a>
            ))}
          </div>
        </div>
      </nav>

      {/* Hero */}
      <motion.section
        id="home"
        initial="hidden"
        animate="visible"
        variants={fadeInUp}
        className="relative pt-32 text-center min-h-[85vh] flex flex-col justify-center pb-16 overflow-hidden"
      >
        {/* Background subtle shapes */}
        <div className="absolute inset-0 -z-10">
          <div className="absolute top-20 left-10 w-64 h-64 bg-purple-600 rounded-full mix-blend-screen filter blur-3xl opacity-20 animate-pulse"></div>
          <div className="absolute bottom-20 right-10 w-72 h-72 bg-blue-500 rounded-full mix-blend-screen filter blur-3xl opacity-20 animate-pulse"></div>
        </div>

        <h2 className="text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600 mb-6">
          Hi, I'm Shivani Kumari 👋
        </h2>
        <div className="text-2xl text-gray-200 mb-6 h-10">
          <Typewriter
            options={{
              strings: [
                "Cloud Engineer ☁️",
                "DevOps Enthusiast ⚡",
                "AWS | Kubernetes | Terraform 🚀",
                "Cloud Security Advocate 🔒",
              ],
              autoStart: true,
              loop: true,
              delay: 70,
            }}
          />
        </div>
        <p className="text-lg text-gray-300 max-w-2xl mx-auto mb-8">
          Designing secure, scalable, and automated cloud infrastructure with AWS, Kubernetes, and DevOps best practices.
        </p>
      </motion.section>

      {/* About */}
      <motion.section
        id="about"
        className="py-20 px-6 max-w-3xl mx-auto"
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true }}
        variants={fadeInUp}
      >
        <h2 className="text-3xl font-bold text-blue-400 mb-4">About Me</h2>
        <p className="text-gray-300 leading-relaxed">
          AWS-certified Cloud & DevOps Engineer with 2+ years of experience building, automating,
          and securing scalable cloud infrastructure. Gold Medalist in B.Tech CSE (Cloud Technology &
          Information Security). Passionate about delivering secure, cost-efficient, and highly available
          cloud solutions with AWS, Kubernetes, Terraform, and DevOps automation.
        </p>
      </motion.section>

      {/* Skills */}
      <motion.section
        id="skills"
        className="py-20 px-6 bg-gray-800/60 backdrop-blur-md rounded-2xl mx-4"
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true }}
        variants={fadeInUp}
      >
        <h2 className="text-3xl font-bold text-purple-400 text-center mb-8">Skills</h2>
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
          {skills.map((skill) => (
            <motion.div
              key={skill.name}
              whileHover={{ scale: 1.08 }}
              className="flex flex-col items-center bg-gray-900 p-4 rounded-lg shadow-lg hover:bg-gray-700 transition"
            >
              {skill.icon}
              <span className="mt-2 text-gray-200 font-medium">{skill.name}</span>
            </motion.div>
          ))}
        </div>
      </motion.section>

      {/* Projects */}
      <motion.section
        id="projects"
        className="py-20 px-6 max-w-4xl mx-auto"
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true }}
        variants={fadeInUp}
      >
        <h2 className="text-3xl font-bold text-blue-400 mb-6">Projects</h2>
        <div className="space-y-6">
          {[
            {
              title: "Terraform AWS Infra Setup",
              desc: "Automated AWS infrastructure provisioning (VPC, EC2, RDS, IAM) with Terraform, ensuring scalability and cost optimization.",
              icon: <IconBadge icon="🛠️" color="" />,
            },
            {
              title: "Kubernetes on ROSA",
              desc: "Deployed microservices on Red Hat OpenShift Service on AWS using ArgoCD GitOps workflows for automation and reliability.",
              icon: <IconBadge icon="📦" color="" />,
            },
            {
              title: "Cloud Security with Prisma",
              desc: "Integrated Prisma Cloud for container and cloud security, IAM compliance, and real-time threat detection.",
              icon: <IconBadge icon="🔒" color="" />,
            },
            {
              title: "Deployment of a Three-Tier Application on AWS EKS",
              desc: "Implemented a scalable and highly available three-tier application architecture using AWS Elastic Kubernetes Service (EKS). Automated deployment pipelines with CI/CD, integrated monitoring, and optimized resource utilization.",
              icon: <IconBadge icon="☁️" color="" />,
            },
          ].map((proj) => (
            <motion.div
              key={proj.title}
              className="flex items-start space-x-4 bg-gradient-to-br from-gray-900 to-gray-800 p-5 shadow-xl rounded-xl border border-gray-700 hover:border-purple-500 transition"
              whileHover={{ scale: 1.02 }}
            >
              {proj.icon}
              <div>
                <h3 className="font-semibold text-lg text-purple-300">{proj.title}</h3>
                <p className="text-gray-300">{proj.desc}</p>
              </div>
            </motion.div>
          ))}
        </div>
      </motion.section>

      {/* Experience */}
      <motion.section
        id="experience"
        className="py-20 px-6 bg-gray-800/60 backdrop-blur-md mx-4 rounded-2xl"
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true }}
        variants={fadeInUp}
      >
        <h2 className="text-3xl font-bold mb-6 text-purple-400 text-center">Experience</h2>
        <div className="max-w-4xl mx-auto space-y-6">
          <div>
            <h3 className="font-semibold text-lg text-blue-300">Cloud Engineer – Reve Cloud (AspireNXT)</h3>
            <p className="text-gray-400">May 2023 – Present</p>
            <p className="text-gray-300">
              Optimized AWS infra with Kubernetes, ArgoCD, and Prisma Cloud. Reduced costs by 25%, ensured 99.99% uptime, and led DR drills.
            </p>
          </div>
          <div>
            <h3 className="font-semibold text-lg text-blue-300">AWS Cloud Intern – F13 Technologies</h3>
            <p className="text-gray-400">Jul 2022 – Oct 2022</p>
            <p className="text-gray-300">
              Hands-on with AWS EC2, S3, RDS, Lambda. Developed automation scripts with Python & Boto3.
            </p>
          </div>
        </div>
      </motion.section>

      {/* Certifications */}
      <motion.section
        id="certifications"
        className="py-20 px-6 max-w-5xl mx-auto"
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true }}
        variants={fadeInUp}
      >
        <h2 className="text-3xl font-bold text-blue-400 mb-6 text-center">Certifications</h2>
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-6">
          {["AWS Certified Solutions Architect – Associate","Oracle Cloud Infrastructure 2023 Certified Foundations Associate","Google IT Automation Certificate","NPTEL - Object Oriented Analysis and Design"].map(
            (cert) => (
              <motion.div key={cert} whileHover={{ scale: 1.03 }} className="bg-gradient-to-br from-gray-900 to-gray-700 p-4 rounded-xl shadow-md text-center border border-gray-700 hover:border-blue-500">
                <h3 className="text-lg font-semibold text-gray-100">{cert}</h3>
              </motion.div>
            )
          )}
        </div>
      </motion.section>

      {/* Achievements */}
      <motion.section
        id="achievements"
        className="py-20 px-6 bg-gray-800/60 backdrop-blur-md max-w-4xl mx-auto rounded-2xl"
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true }}
        variants={fadeInUp}
      >
        <h2 className="text-3xl font-bold text-purple-400 mb-6 text-center">Achievements</h2>
        <ul className="list-disc list-inside text-gray-300 space-y-3">
          <li>Awarded <strong>Gold Medal</strong> for securing 1st position in B.Tech CSE (Cloud Technology & Information Security).</li>
          <li>Delivered <strong>99.99% uptime</strong> infrastructure at Reve Cloud.</li>
          <li>Reduced AWS costs by <strong>25%</strong> via proactive governance and optimization.</li>
          <li>Led <strong>quarterly Disaster Recovery drills</strong> across AWS & ROSA clusters.</li>
        </ul>
      </motion.section>

      {/* Contact */}
      <motion.section
        id="contact"
        className="py-20 px-6 text-center"
        initial="hidden"
        whileInView="visible"
        viewport={{ once: true }}
        variants={fadeInUp}
      >
        <h2 className="text-3xl font-bold text-blue-400 mb-4">Contact</h2>
        <p className="text-gray-300">Email: <a href="mailto:shivani824101@gmail.com" className="text-blue-400">shivani824101@gmail.com</a></p>
        <p className="text-gray-300">Phone: <a href="tel:+916287626747" className="text-blue-400">+91 62876 26747</a></p>
        <p className="text-gray-300">LinkedIn: <a href="https://www.linkedin.com/in/shivanikumaridevops" target="_blank" rel="noreferrer" className="text-blue-400">linkedin.com/in/shivanikumaridevops</a></p>
        <p className="text-gray-300">GitHub: <a href="https://github.com/shi1va" target="_blank" rel="noreferrer" className="text-blue-400">github.com/shi1va</a></p>
      </motion.section>

      <footer className="py-6 text-center text-gray-500">
        © {new Date().getFullYear()} Shivani Kumari. All rights reserved.
      </footer>
    </div>
  );
}
